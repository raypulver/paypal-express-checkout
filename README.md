# paypal-express-checkout

This is a module that authorizes a PayPal transaction token generated by a retailer using PayPal's express checkout service. The function exported by this module accepts four parameters, the PayPal username, the PayPal password, the PayPal token, and a callback to handle the result. The callback passed to the function takes two parameters. The first parameter is the error object (null if there is no error) and the second parameter will be the return URL used to complete the checkout process on the retailer's website. If a callback is not supplied, the function will return a `Promise` which will be resolved with the return URL or rejected with an error.

If you get an error `e`, you can first check if it is a regular Error or a PayPalError by checking the `e.name` property. In most cases `e.message` will contain all the information necessary to fix the problem, but if it is a PayPalError you can additionally look at `e.body` to see the HTTP response that caused the error.

## Usage
```
var checkout = require('paypal-express-checkout');
checkout('raymond.pulver_iv@uconn.edu', 'passw0rd', 'EC-6TX96748R4897145F').then(function (returnUrl) {
  console.log('Return to ' + returnUrl + ' to finish the checkout.');
}, function (err) {
  console.log('Error: ' + err.message);
});
```
Or without promises,
```
checkout('raymond.pulver_iv@uconn.edu', 'passw0rd', 'EC-6TX96748R4897145F', function (err, returnUrl) {
  if (err) console.log('Error: ' + err.message);
  else console.log('Return to ' + returnUrl + ' to finish the checkout.');
});
```

## Testing
To run the test, you must generate a token on a retailer's website, then set the following environment variables:
- `PAYPAL_USER`
- `PAYPAL_PASS`
- `PAYPAL_TOKEN`

Then run `mocha` in the project directory.

## License
MIT
